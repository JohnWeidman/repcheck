<h2 class="text-3xl font-bold mb-4">{{ bill.title }}</h2>
<div class="flex flex-wrap gap-2 mb-4">
    <div class="badge badge-primary">{{ bill.type }} {{ bill.number }}</div>
    <div class="badge badge-outline">Congress {{ bill.congress }}</div>
    <div class="badge badge-secondary">{{ bill.originChamber }}</div>
    {% if bill.policyArea %}<div class="badge badge-accent">{{ bill.policyArea.name }}</div>{% endif %}
    {% if db_bill.tags %}<div>{{ db_bill.tags }}</div>{% endif %}
    {% if bill.laws %}
        {% for law in bill.laws %}<div class="badge badge-success">{{ law.type }} {{ law.number }}</div>{% endfor %}
    {% endif %}
</div>
<div class="grid md:grid-cols-2 gap-6">
    <div>
        <h3 class="text-xl font-bold mb-2">Bill Information</h3>
        <div class="space-y-2">
            <p>
                <strong>Introduced:</strong>
                {% if bill.introducedDate %}
                    {{ bill.introducedDate }}
                {% else %}
                    Not available
                {% endif %}
            </p>
            <p>
                <strong>Last Updated:</strong>
                {% if bill.updateDate %}
                    {{ bill.updateDate }}
                {% else %}
                    Not available
                {% endif %}
            </p>
            <p>
                <strong>Sponsor(s):</strong>
                {% if bill.sponsors %}
                    {% for sponsor in bill.sponsors %}
                        <a href="{% url 'detail' pk=sponsor.member_pk %}" class="link">
                            {{ sponsor.firstName }} {{ sponsor.lastName }}
                            ({{ sponsor.party }}-{{ sponsor.state }}
                            {% if sponsor.district %}-{{ sponsor.district }}{% endif %}
                            )
                        </a>
                        {% if not forloop.last %},{% endif %}
                    {% endfor %}
                {% else %}
                    No sponsors listed
                {% endif %}
            </p>
            <p>
                <strong>Cosponsors:</strong>
                {% if bill.cosponsors %}
                    {{ bill.cosponsors.count }} cosponsors
                {% else %}
                    No cosponsors
                {% endif %}
            </p>
        </div>
    </div>
    <div>
        <h3 class="text-xl font-bold mb-2">Status & Actions</h3>
        <div class="space-y-2">
            <p>
                <strong>Latest Action:</strong>
            </p>
            {% if bill.latestAction %}
                <p class="text-md p-2 rounded">{{ bill.latestAction.actionDate|date:"M d, Y" }} - {{ bill.latestAction.text }}</p>
            {% else %}
                <p class="text-md bg-base-200 p-2 rounded">No recent actions</p>
            {% endif %}
            <p>
                <strong>Total Actions:</strong>
                {% if bill.actions %}
                    {{ bill.actions.count }}
                {% else %}
                    0
                {% endif %}
            </p>
            <p>
                <strong>Amendments:</strong>
                {% if bill.amendments %}
                    {{ bill.amendments.count }}
                {% else %}
                    0
                {% endif %}
            </p>
        </div>
    </div>
</div>
{% if db_bill.gemini_summary %}
    <div class="mt-4">
        <h3 class="text-xl font-bold mb-2">Summary</h3>
        <p class="p-3 text-md">{{ db_bill.gemini_summary }}</p>
    </div>
{% else %}
    <div class="mt-4">
        <h3 class="text-xl font-bold mb-2">Summary</h3>
        <p class="p-3 text-md">No summary available</p>
    </div>
{% endif %}
{% if bill.constitutionalAuthorityStatementText %}
    <div class="mt-4">
        <h3 class="text-xl font-bold mb-2">Constitutional Authority</h3>
        <div class="p-3 text-md">{{ bill.constitutionalAuthorityStatementText|striptags|safe }}</div>
    </div>
{% endif %}
<div class="mt-4">
    <h3 class="text-xl font-bold mb-2">Additional Resources</h3>
    <div class="grid md:grid-cols-2 gap-4">
        {% comment %} <div>
            <h4 class="font-semibold mb-1">Committee Reports:</h4>
            {% if bill.committeeReports %}
                <ul class="text-md space-y-1">
                    {% for report in bill.committeeReports %}
                        <li>
                            <a href="{{ report.url }}" target="_blank" class="link">{{ report.citation }}</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-md">No committee reports available</p>
            {% endif %}
        </div> {% endcomment %}
        <div>
            <h4 class="font-semibold mb-1">CBO Cost Estimates:</h4>
            {% if bill.cboCostEstimates %}
                <ul class="text-md space-y-1">
                    {% for estimate in bill.cboCostEstimates %}
                        <li>
                            <a href="{{ estimate.url }}" target="_blank" class="link">{{ estimate.title }}</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-md">No CBO cost estimates available</p>
            {% endif %}
            {% if db_bill.full_text_url %}
                <a href="{{ db_bill.full_text_url }}" class="link" target="_blank">Full Text</a>
            {% endif %}
        </div>
    </div>
</div>
