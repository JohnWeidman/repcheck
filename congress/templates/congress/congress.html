{% extends "base.html" %}
{% block content %}
    <div class="m-10 card bg-zinc-200 rounded-lg drop-shadow-xl shadow-black">
        <div class="flex justify-center items-center">
            <h1 class="text-3xl mt-24 font-bold md:text-5xl m-2 text-nowrap">Welcome to Congress</h1>
        </div>
        <div class="flex justify-center items-center bg-zinc-200 p-6 rounded-lg border-2 border-base-200 shadow-xl md:w-1/2 w-11/12 mx-auto mt-10">
            <div class="max-w-4xl mx-auto p-6">
                <h1 class="text-center text-3xl font-bold">The Bicameral Legislature System of the US Federal Government</h1>
                <p class="text-xl mt-6 text-center">
                    The United States federal government uses a <strong>bicameral legislature system</strong>, which means Congress is divided into two separate chambers: the <strong>House of Representatives</strong> and the <strong>Senate</strong>. This two-house structure was created by the Founding Fathers as a compromise between large and small states during the Constitutional Convention in 1787.
                </p>
            </div>
        </div>
        <div class="flex flex-col md:w-1/2 w-4/5 mx-auto justify-center items-center">
            <div class="collapse collapse-arrow border-base-300 bg-zinc-200 border  m-6 p-6 mx-auto rounded-lg"
                 tabindex="0">
                <div class="collapse-title">
                    <h2 class="text-center text-2xl font-bold">The House of Representatives</h2>
                </div>
                <div class="collapse-content text-xl">
                    <p>
                        The House of Representatives, often called "the House," has <strong>435 voting members</strong> and <strong><a href="https://en.wikipedia.org/wiki/Non-voting_members_of_the_United_States_House_of_Representatives"
   target="_blank">6 non-voting delegates</a></strong> who serve <strong>two-year terms</strong>. Representation is based on each state's population, so states with more people get more representatives. For example, California has 52 representatives while Wyoming has just one. House members must be at least <strong>25 years old</strong> and are considered closer to the people they represent since they represent smaller districts and face elections more frequently.
                    </p>
                </div>
            </div>
            <div class="collapse collapse-arrow border-base-300 bg-zinc-200 border  m-6 p-6 mx-auto rounded-lg"
                 tabindex="0">
                <div class="collapse-title">
                    <h2 class="text-center text-2xl font-bold">The Senate</h2>
                </div>
                <p class="collapse-content text-xl">
                    The Senate has exactly <strong>100 members</strong>, with each state getting <strong>two senators</strong> regardless of population size. This means Wyoming has the same number of senators as California. Senators serve <strong>six-year terms</strong> and must be at least <strong>30 years old</strong>. The Senate was designed to give smaller states equal voice and to be a more deliberative, stable body.
                </p>
            </div>
            <div class="collapse collapse-arrow border-base-300 bg-zinc-200 border  m-6 p-6 mx-auto rounded-lg"
                 tabindex="0">
                <div class="collapse-title">
                    <h2 class="text-center text-2xl font-bold">How the System Works</h2>
                </div>
                <p class="collapse-content text-xl">
                    Both chambers must pass identical versions of a bill before it can become law. This system creates checks and balances within Congress itself. The House, being larger and more responsive to population changes, often reflects current public opinion more quickly. The Senate, with its equal representation and longer terms, provides stability and protects minority interests.
                </p>
            </div>
            <div class="collapse collapse-arrow border-base-300 bg-zinc-200 border m-6 p-6 mx-auto rounded-lg"
                 tabindex="0">
                <div class="collapse-title">
                    <h2 class="text-center text-2xl font-bold">Unique Powers</h2>
                </div>
                <p class="collapse-content text-xl">
                    Each chamber also has unique powers. Only the House can introduce <em>spending bills</em>, while only the Senate confirms <em>presidential appointments</em> like Supreme Court justices and cabinet members. This bicameral system ensures that legislation must have broad support and prevents any single region or interest group from dominating the federal government.
                </p>
            </div>
        </div>
        <div class="flex flex-col justify-center items-center mt-10">
            <h1 class="text-2xl mx-auto text-center w-4/5 font-bold">Click below for more information about either chamber</h1>
            <h1>_____________________________________</h1>
        </div>
        <div class="flex flex-col md:flex-row justify-center items-center gap-10 mt-10 mb-10">
            <div class="relative text-center">
                <img src="{% static "/theme/images/house-of-reps.jpeg" %}"
                     alt="Chamber of the House of Representatives"
                     height=""
                     width="500"
                     class="rounded-lg">
                <a class="text-6xl  font-bold"
                   href="https://en.wikipedia.org/wiki/United_States_House_of_Representatives"
                   target="_blank">
                    <div class="bg-info text-white pt-4 mt-6 w-2/3 mx-auto rounded-lg flex items-center justify-center transition ease-in-out duration-300 hover:bg-secondary hover:bg-opacity-75 hover:scale-105">
                        House
                    </div>
                </a>
            </div>
            <div class="relative text-center">
                <a class="text-6xl  font-bold"
                   href="https://en.wikipedia.org/wiki/United_States_Senate"
                   target="_blank">
                    <img src="{% static "/theme/images/us-senate-chambers.jpg" %}"
                         alt="Chamber of the Senate"
                         height=""
                         width="490"
                         class="rounded-lg">
                    <div class="bg-info text-white pt-4 px-6 mt-6 w-2/3 mx-auto rounded-lg flex items-center justify-center transition ease-in-out duration-300 hover:bg-secondary hover:bg-opacity-75 hover:scale-105">
                        Senate
                    </div>
                </a>
            </div>
        </div>
        <section class="flex flex-wrap items-center justify-center mx-auto p-6 gap-10 rounded-lg">
            <div class="md:m-8 p-6 rounded-lg md:w-1/2 w-full h-72 bg-zinc-200 border-2 border-base-200 shadow-xl hover:shadow-2xl transition-shadow duration-300 text-center justify-self-center items-center mx-auto">
                <div class="drop-shadow-xl shadow-black">
                    <h2 class="text-4xl font-bold p-4">Current Congress</h2>
                    <h2 class="text-2xl font-bold p-4">Select a Chamber</h2>
                    {% comment %}
                    Make it so that the buttons are the color that corresponds
                    to the party that has a majority in each branch
                    {% endcomment %}
                    <div class="flex justify-center items-center gap-4">
                        <button hx-get="{% url 'house' %}"
                                hx-target="#content"
                                hx-push-url="true"
                                hx-vals='js:{"congress": 119}'
                                class="btn btn-accent btn-lg">
                            <span class="text-2xl text-black">House</span>
                        </button>
                        <button hx-get="{% url 'senate' %}"
                                hx-target="#content"
                                hx-push-url="true"
                                hx-vals='js:{"congress": 119}'
                                class="btn btn-accent btn-lg">
                            <span class="text-2xl text-black">Senate</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="md:m-8 p-4 rounded-lg bg-zinc-200 border-2 border-base-200 shadow-xl hover:shadow-2xl transition-shadow duration-300 sm:max-w-full text-center justify-self-center items-center mx-auto">
                <div class="drop-shadow-xl shadow-black">
                    <h2 class="text-4xl font-bold p-4">Historical Congresses</h2>
                    <div class="flex justify-center items-center p-4">
                        <form id="congress_select">
                            <select class="select select-bordered bg-secondary select-lg w-full max-w-xs"
                                    name="congress"
                                    id="congress"
                                    required>
                                <option class="justify-center" value="">Select a Congress</option>
                                {% for congress in congresses %}
                                    {% if not forloop.first %}
                                        <option class="justify-center" value="{{ congress.id }}">
                                            #{{ congress.congress_number }} | {{ congress.start_date|date:"Y" }}
                                        </option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </form>
                    </div>
                    <h2 class="text-2xl font-bold p-4">Select a Chamber</h2>
                    <div class="flex justify-center items-center gap-4">
                        <button onclick="validateAndNavigate('house')" class="btn btn-accent btn-lg">
                            <span class="text-2xl text-black">House</span>
                        </button>
                        <button onclick="validateAndNavigate('senate')" class="btn btn-accent btn-lg">
                            <span class="text-2xl text-black">Senate</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="md:m-8 p-4 rounded-lg  bg-zinc-200 border-2 border-base-200 shadow-xl hover:shadow-2xl transition-shadow duration-300 sm:max-w-full md:w-1/2 w-full text-center mx-auto">
                <div class="flex flex-col justify-center items-center gap-10 p-4">
                    <h2 class="text-4xl font-bold">Live Proceedings</h2>
                    <div class="flex md:flex-row flex-col justify-center items-center h-full gap-10 p-4">
                        <button class="btn btn-primary btn-lg">
                            <a href="https://live.house.gov/" target="_blank">Live House Proceedings</a>
                        </button>
                        <button class="btn btn-primary btn-lg">
                            <a href="https://www.senate.gov/legislative/floor_activity_pail.htm"
                               target="_blank">Live Senate Proceedings</a>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div id="alert-container"
         class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50"></div>
    <script>
function validateAndNavigate(filterType) {
    const congressSelect = document.getElementById('congress');
    const selectedCongress = congressSelect.value;
    
    if (!selectedCongress) {
        showAlert('Please select a Congress before proceeding.');
        return;
    }
    
    const url = filterType === 'house' ? '{% url "house" %}' : '{% url "senate" %}';
    htmx.ajax('GET', `${url}?congress=${selectedCongress}`, {
        target: '#content',
        swap: 'innerHTML'
    });
    
    history.pushState({page: filterType, congress: selectedCongress}, '', `${url}?congress=${selectedCongress}`);
}

function showAlert(message) {
    const alertContainer = document.getElementById('alert-container');
    
    alertContainer.innerHTML = '';
    
    const alertHTML = `
        <div class="alert alert-error shadow-lg max-w-md">
            <div>
                <span class="mr-2 text-center">${message}</span>
            </div>
            <div class="fixed md:top-3 top-0 right-0">
                <button onclick="closeAlert()" class="btn btn-sm btn-ghost">âœ•</button>
            </div>
        </div>
    `;
    
    alertContainer.innerHTML = alertHTML;
    setTimeout(closeAlert, 5000);
}

function closeAlert() {
    const alertContainer = document.getElementById('alert-container');
    alertContainer.innerHTML = '';
}

window.addEventListener('popstate', function(event) {
    window.location.reload();
});

window.addEventListener('load', function() {
    history.replaceState({page: 'congress'}, '', window.location.href);
});
    </script>
{% endblock content %}
